{"ast":null,"code":"import CountBox from '@/components/CountBox.vue';\nimport { mapState, mapGetters } from 'vuex';\nexport default {\n  name: 'CartPage',\n  components: {\n    CountBox\n  },\n  computed: {\n    isLogin() {\n      return this.$store.getters.token;\n    },\n    ...mapState('cart', ['cartList']),\n    ...mapGetters('cart', ['cartTotal', ' selCartList', 'selCount', 'selPrice', 'isAllChecked'])\n  },\n  created() {\n    if (this.isLogin) {\n      this.$store.dispatch('cart/getCartAction');\n    }\n  },\n  methods: {\n    toggleCheck(goodsId) {\n      this.$store.commit('cart/toggleCheck', goodsId);\n    }\n  }\n};","map":{"version":3,"names":["CountBox","mapState","mapGetters","name","components","computed","isLogin","$store","getters","token","created","dispatch","methods","toggleCheck","goodsId","commit"],"sources":["src/views/layout/cart.vue"],"sourcesContent":["<template>\r\n  <div class=\"cart\">\r\n    <van-nav-bar title=\"购物车\" fixed />\r\n    <!-- 购物车开头 -->\r\n    <div class=\"cart-title\">\r\n      <span class=\"all\">共<i>{{cartTotal||0 }}</i>件商品</span>\r\n      <span class=\"edit\">\r\n        <van-icon name=\"edit\" />\r\n        编辑\r\n      </span>\r\n    </div>\r\n\r\n    <!-- 购物车列表 -->\r\n    <div class=\"cart-list\">\r\n      <div\r\n        class=\"cart-item\"\r\n        v-for=\"item in  cartList\"\r\n        :key=\"item.goods_id\">\r\n        <van-checkbox\r\n        @click=\"toggleCheck(item.goods_id)\"\r\n        :value=\"item.ischecked\"></van-checkbox>\r\n        <div\r\n        @click=\"$router.push(`/prodetail/${item.goods_id}`)\"\r\n        class=\"show\">\r\n          <img :src=\"item.goods.goods_image\" alt=\"\">\r\n        </div>\r\n        <div class=\"info\">\r\n          <span class=\"tit text-ellipsis-2\">{{item.goods.goods_name}}</span>\r\n          <span class=\"bottom\">\r\n            <div class=\"price\">¥ <span>{{\r\n              item.goods.goods_price_min}}</span></div>\r\n            <CountBox :value=\"item.goods_num\"></CountBox>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"footer-fixed\">\r\n      <div  class=\"all-check\">\r\n        <van-checkbox\r\n        @click=\"toggleAllCheck\"\r\n        :value=\"isAllChecked\"\r\n        icon-size=\"18\"></van-checkbox>\r\n        全选\r\n      </div>\r\n\r\n      <div class=\"all-total\">\r\n        <div class=\"price\">\r\n          <span>合计：</span>\r\n          <span>¥ <i class=\"totalPrice\">{{ selPrice }}</i></span>\r\n        </div>\r\n        <div :class=\"{ disabled: selCount === 0 }\" v-if=\"true\" class=\"goPay\">结算({{ selCount }})</div>\r\n        <div :class=\"{ disabled: selCount === 0 }\" v-else class=\"delete\">删除</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CountBox from '@/components/CountBox.vue'\r\nimport { mapState, mapGetters } from 'vuex'\r\nexport default {\r\n  name: 'CartPage',\r\n  components: {\r\n    CountBox\r\n\r\n  },\r\n  computed: {\r\n    isLogin () {\r\n      return this.$store.getters.token\r\n    },\r\n    ...mapState('cart', ['cartList']),\r\n    ...mapGetters('cart', ['cartTotal', ' selCartList', 'selCount', 'selPrice', 'isAllChecked'])\r\n  },\r\n  created () {\r\n    if (this.isLogin) {\r\n      this.$store.dispatch('cart/getCartAction')\r\n    }\r\n  },\r\n  methods: {\r\n    toggleCheck (goodsId) {\r\n      this.$store.commit('cart/toggleCheck', goodsId)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n// 主题 padding\r\n.cart {\r\n  padding-top: 46px;\r\n  padding-bottom: 100px;\r\n  background-color: #f5f5f5;\r\n  min-height: 100vh;\r\n  .cart-title {\r\n    height: 40px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 0 10px;\r\n    font-size: 14px;\r\n    .all {\r\n      i {\r\n        font-style: normal;\r\n        margin: 0 2px;\r\n        color: #fa2209;\r\n        font-size: 16px;\r\n      }\r\n    }\r\n    .edit {\r\n      .van-icon {\r\n        font-size: 18px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .cart-item {\r\n    margin: 0 10px 10px 10px;\r\n    padding: 10px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    background-color: #ffffff;\r\n    border-radius: 5px;\r\n\r\n    .show img {\r\n      width: 100px;\r\n      height: 100px;\r\n    }\r\n    .info {\r\n      width: 210px;\r\n      padding: 10px 5px;\r\n      font-size: 14px;\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: space-between;\r\n\r\n      .bottom {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        .price {\r\n          display: flex;\r\n          align-items: flex-end;\r\n          color: #fa2209;\r\n          font-size: 12px;\r\n          span {\r\n            font-size: 16px;\r\n          }\r\n        }\r\n        .count-box {\r\n          display: flex;\r\n          width: 110px;\r\n          .add,\r\n          .minus {\r\n            width: 30px;\r\n            height: 30px;\r\n            outline: none;\r\n            border: none;\r\n          }\r\n          .inp {\r\n            width: 40px;\r\n            height: 30px;\r\n            outline: none;\r\n            border: none;\r\n            background-color: #efefef;\r\n            text-align: center;\r\n            margin: 0 5px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.footer-fixed {\r\n  position: fixed;\r\n  left: 0;\r\n  bottom: 50px;\r\n  height: 50px;\r\n  width: 100%;\r\n  border-bottom: 1px solid #ccc;\r\n  background-color: #fff;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0 10px;\r\n\r\n  .all-check {\r\n    display: flex;\r\n    align-items: center;\r\n    .van-checkbox {\r\n      margin-right: 5px;\r\n    }\r\n  }\r\n\r\n  .all-total {\r\n    display: flex;\r\n    line-height: 36px;\r\n    .price {\r\n      font-size: 14px;\r\n      margin-right: 10px;\r\n      .totalPrice {\r\n        color: #fa2209;\r\n        font-size: 18px;\r\n        font-style: normal;\r\n      }\r\n    }\r\n\r\n    .goPay, .delete {\r\n      min-width: 100px;\r\n      height: 36px;\r\n      line-height: 36px;\r\n      text-align: center;\r\n      background-color: #fa2f21;\r\n      color: #fff;\r\n      border-radius: 18px;\r\n      &.disabled {\r\n        background-color: #ff9779;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n</style>\r\n"],"mappings":"AA2DA,OAAAA,QAAA;AACA,SAAAC,QAAA,EAAAC,UAAA;AACA;EACAC,IAAA;EACAC,UAAA;IACAJ;EAEA;EACAK,QAAA;IACAC,QAAA;MACA,YAAAC,MAAA,CAAAC,OAAA,CAAAC,KAAA;IACA;IACA,GAAAR,QAAA;IACA,GAAAC,UAAA;EACA;EACAQ,QAAA;IACA,SAAAJ,OAAA;MACA,KAAAC,MAAA,CAAAI,QAAA;IACA;EACA;EACAC,OAAA;IACAC,YAAAC,OAAA;MACA,KAAAP,MAAA,CAAAQ,MAAA,qBAAAD,OAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}